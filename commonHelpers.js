import{S as p,i as v,a as L}from"./assets/vendor-bad0427b.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function o(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerpolicy&&(a.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?a.credentials="include":e.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(e){if(e.ep)return;e.ep=!0;const a=o(e);fetch(e.href,a)}})();const w=new URL("/goit-js-hw-12/assets/arrow-icons-a5dab455.svg#icon-left",self.location).href,b=new URL("/goit-js-hw-12/assets/arrow-icons-a5dab455.svg#icon-right",self.location).href,S=new URL("/goit-js-hw-12/assets/error-icon-40fa32d5.svg",self.location).href,R=new URL("/goit-js-hw-12/assets/warning-icon-12913e67.svg",self.location).href,h="user-query",u=document.querySelector(".gallery"),P=document.querySelector(".search-photos"),i=document.querySelector(".loader-wrapper"),r=document.querySelector(".more-btn"),U=new p(".gallery a",{navText:[`<svg width="24" height="24"><use href="${w}"></svg>`,`<svg width="24" height="24"><use href="${b}"></svg>`],captionsData:"alt",captionDelay:!1}),g=()=>{const s=document.querySelector(".gallery-item").getBoundingClientRect().height*2;window.scrollBy({top:s,behavior:"smooth"})};let l=1,m=40;const c=(t,s="ERROR",o=S,n="rgba(239, 64, 64, 1)")=>{v.show({title:s,backgroundColor:n,theme:"dark",message:t,position:"topRight",timeout:5e3,iconUrl:o})},q=t=>Math.ceil(t.totalHits/m),k=async t=>(await L.get("https://pixabay.com/api/",{params:{key:"41527103-e0775164a767d3baf6162359a",q:encodeURIComponent(t).replace(/%20/g,"+"),image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:m,page:l}})).data,I=t=>{const s=t.hits;if(t.totalHits===0)return r.classList.add("visually-hidden"),c("Sorry, there are no images matching your search query. Please, try again!");{const o=s.map(({webformatURL:n,largeImageURL:e,tags:a})=>`
                    <li class="gallery-item">
                        <a class="gallery-link" href="${e}">
                            <img
                                loading="lazy"
                                class="gallery-image"
                                src="${n}"
                                alt="${a}"
                            />
                        </a>
                    </li>
                    `).join("");u.insertAdjacentHTML("beforeend",o),U.refresh()}},f=async t=>{try{const s=await k(t),o=q(s);I(s),l===o?(r.classList.add("visually-hidden"),c("The end of collection has been reached","INFO",R,"rgba(167, 166, 145, 1)")):l<o&&r.classList.remove("visually-hidden")}catch(s){c("Something went wrong. Please, try again. Status: ",s.status)}},y=async()=>{l+=1,i.classList.remove("visually-hidden"),r.classList.add("visually-hidden"),g(),await f(sessionStorage.getItem(h)),g(),r.classList.contains("visually-hidden")&&r.removeEventListener("click",y),i.classList.add("visually-hidden")},E=async t=>{t.preventDefault(),l=1,u.innerHTML="",i.classList.remove("visually-hidden"),r.classList.add("visually-hidden");const o=new FormData(t.currentTarget).get("search").trim().toLowerCase();if(!o||o.length<3)return i.classList.add("visually-hidden"),c("Please, enter something (at least 3 characters long)");sessionStorage.setItem(h,o),await f(o),i.classList.add("visually-hidden"),t.target.reset(),r.addEventListener("click",y)};P.addEventListener("submit",E);
//# sourceMappingURL=commonHelpers.js.map
